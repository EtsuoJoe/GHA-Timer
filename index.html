<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro HIIT</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* --- CSS STYLES --- */
        :root {
            --crt-green: #39ff14; 
        }

        body {
            background-color: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'VT323', monospace;
            color: var(--crt-green);
        }

        /* 1. The Main Container */
        /* This holds both the image and the timer */
        #game-container {
            position: relative; /* Allows us to position things inside it absolutely */
            width: 100%;
            max-width: 800px; /* Limits size on big screens */
        }

        /* 2. The Background Image */
        #bg-image {
            width: 100%;
            height: auto;
            display: block; /* Removes weird bottom spacing */
        }

        /* 3. The Timer Overlay "Zone" */
        /* This is the invisible box we place OVER the TV screen in the picture */
        #crt-screen {
            position: absolute;
            
            /* --- ALIGNMENT SETTINGS (Tweak these if it doesn't fit!) --- */
            top: 45%;    /* Distance from top of image */
            left: 13%;   /* Distance from left of image */
            width: 70%;  /* Width of the TV screen area */
            height: 30%; /* Height of the TV screen area */
            /* ----------------------------------------------------------- */

            /* DEBUG MODE: Keeps a red outline so you can see the fit. 
               Change '2px solid red' to 'none' when finished! */
            border: 2px solid red; 
            
            /* Visual Styling */
            background-color: rgba(0, 20, 0, 0.7); /* Darkens the screen area slightly */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 2% 4%; /* Inner spacing so text doesn't hit the bezel */
            box-sizing: border-box; 
            text-shadow: 0 0 5px var(--crt-green); /* Glow effect */
        }

        /* Setup Inputs Styling */
        .setup-controls {
            display: flex;
            justify-content: space-between;
            font-size: 3vw; /* Responsive font size based on screen width */
            gap: 5px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Responsive Inputs */
        input[type="number"] {
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--crt-green);
            color: var(--crt-green);
            font-family: 'VT323', monospace;
            font-size: 3vw; 
            width: 8vw;
            text-align: center;
        }
        
        .checkbox-group {
             display: flex;
             flex-direction: column;
             align-items: center;
             font-size: 2.5vw;
        }

        /* Main Display Text */
        #status-label {
            font-size: 5vw; 
            text-align: center;
            text-transform: uppercase;
        }

        #time-remaining {
            font-size: 14vw; /* Massive text for the timer */
            line-height: 0.9;
            text-align: center;
        }

        #rounds-tracker {
            font-size: 3vw;
            text-align: center;
        }

        /* Buttons */
        button {
            background: var(--crt-green);
            color: black;
            border: none;
            font-family: 'VT323', monospace;
            font-size: 3vw;
            padding: 1% 4%;
            cursor: pointer;
            text-transform: uppercase;
        }
        
        .hidden { display: none !important; }

        /* Blink Animation */
        @keyframes fast-blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        .blinking { animation: fast-blink 0.5s infinite; color: orange !important; }

    </style>
</head>
<body>

    <div id="game-container">
        <img src="bg.png" id="bg-image" alt="Retro TV Background">

        <div id="crt-screen">
            
            <div id="setup-area">
                <div class="setup-controls">
                    <div class="input-group">
                        <label>WORK</label>
                        <input type="number" id="work-in" value="30">
                    </div>
                    <div class="input-group">
                        <label>REST</label>
                        <input type="number" id="rest-in" value="10">
                    </div>
                    <div class="input-group">
                        <label>RNDS</label>
                        <input type="number" id="rounds-in" value="8">
                    </div>
                    <div class="checkbox-group">
                        <label>DELAY</label>
                        <input type="checkbox" id="delay-in" checked>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 5%;">
                    <button id="start-btn">INITIALIZE</button>
                </div>
            </div>

            <div id="workout-area" class="hidden" style="height: 100%; display: flex; flex-direction: column; justify-content: space-between;">
                 <div id="rounds-tracker">RND: <span id="curr-round">1</span>/<span id="total-rounds-disp">8</span></div>
                 
                 <div style="flex-grow: 1; display: flex; flex-direction: column; justify-content: center;">
                    <div id="status-label">READY</div>
                    <div id="time-remaining">00</div>
                 </div>

                 <div style="text-align: center;">
                    <button id="reset-btn">RESET</button>
                 </div>
            </div>

        </div>
    </div>

    <script>
        /* --- SAME JAVASCRIPT LOGIC AS BEFORE --- */
        let workSecs, restSecs, totalRounds;
        let currentRound = 1;
        let isWorking = true;
        let isDelaying = false;
        let timeLeft;
        let timerInterval;

        const setupArea = document.getElementById('setup-area');
        const workoutArea = document.getElementById('workout-area');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const statusLabel = document.getElementById('status-label');
        const timeDisplay = document.getElementById('time-remaining');
        const currRoundDisp = document.getElementById('curr-round');
        const totalRoundsDisp = document.getElementById('total-rounds-disp');
        const delayCheck = document.getElementById('delay-in');

        function formatTime(seconds) { return seconds < 10 ? `0${seconds}` : seconds; }
        function updateDisplay() { timeDisplay.textContent = formatTime(timeLeft); }

        function switchMode() {
            if (isDelaying) {
                isDelaying = false;
                statusLabel.classList.remove('blinking');
                startActualWorkRound();
                return;
            }
            if (!isWorking) {
                currentRound++;
                currRoundDisp.textContent = currentRound;
            }
            if (currentRound > totalRounds) {
                clearInterval(timerInterval);
                statusLabel.textContent = "DONE!";
                statusLabel.style.color = "var(--crt-green)";
                timeDisplay.textContent = "END";
                return;
            }
            isWorking = !isWorking;
            if (isWorking) {
                setStatus("WORK!", "var(--crt-green)");
                timeLeft = workSecs;
            } else {
                setStatus("REST...", "#ffff00");
                timeLeft = restSecs;
            }
            updateDisplay();
        }

        function setStatus(text, color) {
            statusLabel.textContent = text;
            statusLabel.style.color = color;
        }

        function startActualWorkRound() {
            isWorking = true;
            setStatus("WORK!", "var(--crt-green)");
            timeLeft = workSecs;
            updateDisplay();
        }

        function tick() {
            timeLeft--;
            updateDisplay();
            if (timeLeft <= 0) switchMode();
        }

        function startWorkout() {
            workSecs = parseInt(document.getElementById('work-in').value);
            restSecs = parseInt(document.getElementById('rest-in').value);
            totalRounds = parseInt(document.getElementById('rounds-in').value);
            
            if(workSecs < 1 || restSecs < 1 || totalRounds < 1) return;

            currentRound = 1;
            totalRoundsDisp.textContent = totalRounds;
            currRoundDisp.textContent = currentRound;
            
            setupArea.classList.add('hidden');
            workoutArea.classList.remove('hidden');

            if (delayCheck.checked) {
                isDelaying = true;
                timeLeft = 5;
                setStatus("PREP", "orange");
                statusLabel.classList.add('blinking');
            } else {
                isDelaying = false;
                startActualWorkRound();
            }
            
            updateDisplay();
            timerInterval = setInterval(tick, 1000);
        }

        function resetWorkout() {
            clearInterval(timerInterval);
            statusLabel.classList.remove('blinking');
            workoutArea.classList.add('hidden');
            setupArea.classList.remove('hidden');
        }

        startBtn.addEventListener('click', startWorkout);
        resetBtn.addEventListener('click', resetWorkout);
    </script>
</body>
</html>


